<!DOCTYPE HTML><html lang="zh-hans"><head><meta charset="UTF-8"><meta content="text/html; charset=utf-8"http-equiv="Content-Type"><title>File storage</title><meta content="IE=edge"http-equiv="X-UA-Compatible"/><meta content="
  
"name="description"><meta content="GitBook 3.2.3"name="generator"><meta content="QuickApp.cn"name="author"><link href="../../gitbook/style.css"rel="stylesheet"><link href="../../gitbook/gitbook-plugin-search-pro/search.css"rel="stylesheet"><link href="../../gitbook/gitbook-plugin-highlight-hap/website.css"rel="stylesheet"><link href="../../gitbook/gitbook-plugin-anchor-navigation-ex/style/plugin.css"rel="stylesheet"><link href="../../styles/website.css"rel="stylesheet"><meta content="no-cache"http-equiv="Pragma"/><meta content="no-cache"http-equiv="Cache-Control"/><meta content="0"http-equiv="Expires"/><meta content="true"name="HandheldFriendly"/><meta content="width=device-width,initial-scale=1,user-scalable=no"name="viewport"><meta content="yes"name="apple-mobile-web-app-capable"><meta content="black"name="apple-mobile-web-app-status-bar-style"><link href="../../gitbook/images/apple-touch-icon-precomposed-152.png"rel="apple-touch-icon-precomposed"sizes="152x152"><link href="../../gitbook/images/favicon.ico"rel="shortcut icon"type="image/x-icon"><link href="storage.en.html"rel="prev"/><link href="storage.en.html"rel="prev"/></head><body><header class="doc-header"><a href="javascript:;"class="btn doc-menu-toggle"aria-label=""><i class="fa fa-bars"aria-hidden="true"></i></a><div class="doc-logo"><a style="font-size:150%"target="_blank"title="quickapp">QuickApp</a></div><div class="doc-nav"><a href="../../">Tutorial</a> <a href="../../framework/index.en.html">Framework</a> <a href="../../widgets/common-events.en.html">Widgets</a> <a href="../index.en.html"class="current">Features</a></div><div class="doc-search-bar"><div id="book-search-input"><i class="fa fa-search icon-search"aria-hidden="true"></i> <input placeholder="关键字搜索"type="text"></div></div></header><div class="doc-container"><nav class="doc-menu"role="navigation"><ul class="summary"><li class="open chapter"data-level="2.1.3.1"><a href="javascript:;">Basic functions <span class="icon icon-arrow"></span></a><ul class="articles"><li class="open chapter"data-level="2.1.3.1.1"data-path="app.en.html"><a href="app.en.html">App context</a></li><li class="open chapter"data-level="2.1.3.1.2"data-path="log.en.html"><a href="log.en.html">Log printing</a></li><li class="open chapter"data-level="2.1.3.1.3"data-path="router.en.html"><a href="router.en.html">Page routing</a></li></ul></li><li class="open chapter"data-level="2.1.3.2"><a href="javascript:;">Interface interaction <span class="icon icon-arrow"></span></a><ul class="articles"><li class="open chapter"data-level="2.1.3.2.1"data-path="prompt.en.html"><a href="prompt.en.html">Pop-up window</a></li><li class="open chapter"data-level="2.1.3.2.2"data-path="webview.en.html"><a href="webview.en.html">Open web page</a></li></ul></li><li class="open chapter"data-level="2.1.3.3"><a href="javascript:;">Network access <span class="icon icon-arrow"></span></a><ul class="articles"><li class="open chapter"data-level="2.1.3.3.1"data-path="fetch.en.html"><a href="fetch.en.html">Data request</a></li></ul></li><li class="open open chapter"data-level="2.1.3.4"><a href="javascript:;">File data <span class="icon icon-arrow"></span></a><ul class="articles"><li class="open chapter"data-level="2.1.3.4.1"data-path="storage.en.html"><a href="storage.en.html">Data storage</a></li><li class="open open chapter active"data-level="2.1.3.4.2"data-path="file.en.html"><a href="file.en.html">File storage</a></li></ul></li><li class="open chapter"data-level="2.1.3.5"><a href="javascript:;">System capabilities <span class="icon icon-arrow"></span></a><ul class="articles"><li class="open chapter"data-level="2.1.3.5.1"data-path="geolocation.en.html"><a href="geolocation.en.html">Geographical location</a></li><li class="open chapter"data-level="2.1.3.5.2"data-path="shortcut.en.html"><a href="shortcut.en.html">Home screen icons</a></li><li class="open chapter"data-level="2.1.3.5.3"data-path="network.en.html"><a href="network.en.html">Network status</a></li><li class="open chapter"data-level="2.1.3.5.4"data-path="device.en.html"><a href="device.en.html">Device information</a></li></ul></li><li class="open chapter"data-level="2.1.3.6"><a href="javascript:;">Graphics <span class="icon icon-arrow"></span></a><ul class="articles"><li class="open chapter"data-level="2.1.3.6.1"data-path="media.en.html"><a href="media.en.html">Multimedia</a></li></ul></li><li class="open chapter"data-level="2.1.3.7"><a href="javascript:;">Vendor services <span class="icon icon-arrow"></span></a><ul class="articles"><li class="open chapter"data-level="2.1.3.7.1"data-path="../service/push.en.html"><a href="../service/push.en.html">Push</a></li></ul></li></ul></nav><div class="doc-content"><div class="doc-content-inner"><div class="page-inner"><div id="book-search-results"><div class="search-noresults"><section class="markdown-section normal"><a href="#file-storage-101"id="anchorNavigationExGoTop"><i class="fa fa-arrow-up"></i></a><h1 id="file-storage-101"><a href="#file-storage-101"class="anchor-navigation-ex-anchor"name="file-storage-101"><i class="fa fa-link"aria-hidden="true"></i></a>File storage <code>101+</code></h1><h2 id="interface-declaration"><a href="#interface-declaration"class="anchor-navigation-ex-anchor"name="interface-declaration"><i class="fa fa-link"aria-hidden="true"></i></a>Interface declaration</h2><pre><code>{"name": "system.file"}
</code></pre><h2 id="import-module"><a href="#import-module"class="anchor-navigation-ex-anchor"name="import-module"><i class="fa fa-link"aria-hidden="true"></i></a>Import module</h2><pre><code>import file from '@system.file' or var file = require("@system.file")
</code></pre><h2 id="interface-definition"><a href="#interface-definition"class="anchor-navigation-ex-anchor"name="interface-definition"><i class="fa fa-link"aria-hidden="true"></i></a>Interface definition</h2><h3 id="filemoveobject"><a href="#filemoveobject"class="anchor-navigation-ex-anchor"name="filemoveobject"><i class="fa fa-link"aria-hidden="true"></i></a>file.move(OBJECT)</h3><p>Move the source file to a specified location, for details on the URIs used in the interface, see <a href="../../framework/file-organization.md">File organization</a></p><h4 id="parameters"><a href="#parameters"class="anchor-navigation-ex-anchor"name="parameters"><i class="fa fa-link"aria-hidden="true"></i></a>Parameters:</h4><table><thead><tr><th>Parameter name</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td>srcUri</td><td>String</td><td>Yes</td><td>The URI of the source file, it can't be an app source file path and tmp type URI</td></tr><tr><td>dstUri</td><td>String</td><td>Yes</td><td>The URI of the target file, it can't be an app source file path and tmp type URI</td></tr><tr><td>success</td><td>Function</td><td>No</td><td>Successful callback, returns the URI of the target file</td></tr><tr><td>fail</td><td>Function</td><td>No</td><td>Couldn't return callback</td></tr><tr><td>complete</td><td>Function</td><td>No</td><td>The callback after the implementation finished</td></tr></tbody></table><h5 id="fail-return-error-code"><a href="#fail-return-error-code"class="anchor-navigation-ex-anchor"name="fail-return-error-code"><i class="fa fa-link"aria-hidden="true"></i></a>Fail return error code</h5><table><thead><tr><th>Error code</th><th>Description</th></tr></thead><tbody><tr><td>202</td><td>Parameter error</td></tr><tr><td>300</td><td>I/O error</td></tr></tbody></table><h4 id="example"><a href="#example"class="anchor-navigation-ex-anchor"name="example"><i class="fa fa-link"aria-hidden="true"></i></a>Example:</h4><pre><code>file.move({
  srcUri: "internal://cache/path/to/file",
  dstUri: "internal://files/path/to/file",
  success: function(uri) {
    console.log("move success: " + uri);
  },
  fail: function(data, code) {
    console.log("handling fail, code=" + code);
  }
})
</code></pre><h3 id="filecopyobject"><a href="#filecopyobject"class="anchor-navigation-ex-anchor"name="filecopyobject"><i class="fa fa-link"aria-hidden="true"></i></a>file.copy(OBJECT)</h3><p>Make a copy of the source file and save it to a specified location, for details on the URIs used in the interface, see <a href="../../framework/file-organization.md">File organization</a></p><h4 id="parameters_1"><a href="#parameters_1"class="anchor-navigation-ex-anchor"name="parameters_1"><i class="fa fa-link"aria-hidden="true"></i></a>Parameters:</h4><table><thead><tr><th>Parameter name</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td>srcUri</td><td>String</td><td>Yes</td><td>URI of the source file</td></tr><tr><td>dstUri</td><td>String</td><td>Yes</td><td>The URI of the target file, it can't be an app source file path and tmp type URI</td></tr><tr><td>success</td><td>Function</td><td>No</td><td>Successful callback, returns the URI of the target file</td></tr><tr><td>fail</td><td>Function</td><td>No</td><td>Couldn't return callback</td></tr><tr><td>complete</td><td>Function</td><td>No</td><td>The callback after the implementation finished</td></tr></tbody></table><h5 id="fail-return-error-code_1"><a href="#fail-return-error-code_1"class="anchor-navigation-ex-anchor"name="fail-return-error-code_1"><i class="fa fa-link"aria-hidden="true"></i></a>Fail return error code</h5><table><thead><tr><th>Error code</th><th>Description</th></tr></thead><tbody><tr><td>202</td><td>Parameter error</td></tr><tr><td>300</td><td>I/O error</td></tr></tbody></table><h4 id="example_1"><a href="#example_1"class="anchor-navigation-ex-anchor"name="example_1"><i class="fa fa-link"aria-hidden="true"></i></a>Example:</h4><pre><code>file.copy({
  srcUri: "internal://cache/path/to/file",
  dstUri: "internal://files/path/to/file",
  success: function(uri) {
    console.log("copy success: " + uri);
  },
  fail: function(data, code) {
    console.log("handling fail, code=" + code);
  }
})
</code></pre><h3 id="filelistobject"><a href="#filelistobject"class="anchor-navigation-ex-anchor"name="filelistobject"><i class="fa fa-link"aria-hidden="true"></i></a>file.list(OBJECT)</h3><p>Get the file list in a specified directory, for details on the URIs used in the interface, see <a href="../../framework/file-organization.md">File organization</a></p><h4 id="parameters_2"><a href="#parameters_2"class="anchor-navigation-ex-anchor"name="parameters_2"><i class="fa fa-link"aria-hidden="true"></i></a>Parameters:</h4><table><thead><tr><th>Parameter name</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td>uri</td><td>String</td><td>Yes</td><td>Directory URI, it can't be an app source file path and tmp type URI</td></tr><tr><td>success</td><td>Function</td><td>No</td><td>Successful callback, returns {filelist:[{uri:'file1',lastModifiedTime:1234456, length:123456} ...]}</td></tr><tr><td>fail</td><td>Function</td><td>No</td><td>Couldn't return callback</td></tr><tr><td>complete</td><td>Function</td><td>No</td><td>The callback after the implementation finished</td></tr></tbody></table><h5 id="success-return-value"><a href="#success-return-value"class="anchor-navigation-ex-anchor"name="success-return-value"><i class="fa fa-link"aria-hidden="true"></i></a>Success return value:</h5><table><thead><tr><th>Parameter name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fileList</td><td>Array</td><td>File list, the format of each file is {uri:'file1',lastModifiedTime:1234456, length:123456}</td></tr></tbody></table><h6 id="the-meta-information-of-every-file"><a href="#the-meta-information-of-every-file"class="anchor-navigation-ex-anchor"name="the-meta-information-of-every-file"><i class="fa fa-link"aria-hidden="true"></i></a>The meta information of every file</h6><table><thead><tr><th>Parameter name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>uri</td><td>String</td><td>The file URI, this URI can be accessed by other components or features</td></tr><tr><td>length</td><td>Number</td><td>File size, unit B</td></tr><tr><td>lastModifiedTime</td><td>Number</td><td>The timestamp of the saved file, the number of milliseconds from 1970/01/01 00:00:00 GMT to the current time</td></tr></tbody></table><h5 id="fail-return-error-code_2"><a href="#fail-return-error-code_2"class="anchor-navigation-ex-anchor"name="fail-return-error-code_2"><i class="fa fa-link"aria-hidden="true"></i></a>Fail return error code</h5><table><thead><tr><th>Error code</th><th>Description</th></tr></thead><tbody><tr><td>202</td><td>Parameter error</td></tr><tr><td>300</td><td>I/O error</td></tr></tbody></table><h4 id="example_2"><a href="#example_2"class="anchor-navigation-ex-anchor"name="example_2"><i class="fa fa-link"aria-hidden="true"></i></a>Example:</h4><pre><code>file.list({
  uri: "internal://files/movies/"
  success: function(data) {
    console.log(data.fileList)
  },
  fail: function(data, code) {
    console.log("handling fail, code=" + code);
  }
})
</code></pre><h3 id="filegetobject"><a href="#filegetobject"class="anchor-navigation-ex-anchor"name="filegetobject"><i class="fa fa-link"aria-hidden="true"></i></a>file.get(OBJECT)</h3><p>Get the file information of a local file, for details on the URIs used in the interface, see <a href="../../framework/file-organization.md">File organization</a></p><h4 id="parameters_3"><a href="#parameters_3"class="anchor-navigation-ex-anchor"name="parameters_3"><i class="fa fa-link"aria-hidden="true"></i></a>Parameters:</h4><table><thead><tr><th>Parameter name</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td>uri</td><td>String</td><td>Yes</td><td>The URI of the file, it can't be an app source file path and tmp type URI</td></tr><tr><td>success</td><td>Function</td><td>No</td><td>Successful callback, returns {uri:'file1', length:123456, lastModifiedTime:1233456}</td></tr><tr><td>fail</td><td>Function</td><td>No</td><td>Couldn't return callback</td></tr><tr><td>complete</td><td>Function</td><td>No</td><td>The callback after the implementation finished</td></tr></tbody></table><h5 id="success-return-value_1"><a href="#success-return-value_1"class="anchor-navigation-ex-anchor"name="success-return-value_1"><i class="fa fa-link"aria-hidden="true"></i></a>Success return value:</h5><table><thead><tr><th>Parameter name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>uri</td><td>String</td><td>The file URI, this URI can be accessed by other components or features</td></tr><tr><td>length</td><td>Number</td><td>File size, unit B</td></tr><tr><td>lastModifiedTime</td><td>Number</td><td>The timestamp of the saved file, the number of seconds from 1970/01/01 08:00:00 to the current time</td></tr></tbody></table><h5 id="fail-return-error-code_3"><a href="#fail-return-error-code_3"class="anchor-navigation-ex-anchor"name="fail-return-error-code_3"><i class="fa fa-link"aria-hidden="true"></i></a>Fail return error code</h5><table><thead><tr><th>Error code</th><th>Description</th></tr></thead><tbody><tr><td>202</td><td>Parameter error</td></tr><tr><td>300</td><td>I/O error</td></tr></tbody></table><h4 id="example_3"><a href="#example_3"class="anchor-navigation-ex-anchor"name="example_3"><i class="fa fa-link"aria-hidden="true"></i></a>Example:</h4><pre><code>file.get({
  uri: 'internal://files/path/to/file',
  success: function(data) {
    console.log(data.uri);
    console.log(data.length);
    console.log(data.lastModifiedTime);
  },
  fail: function(data, code) {
    console.log("handling fail, code=" + code);
  }
})
</code></pre><h3 id="filedeleteobject"><a href="#filedeleteobject"class="anchor-navigation-ex-anchor"name="filedeleteobject"><i class="fa fa-link"aria-hidden="true"></i></a>file.delete(OBJECT)</h3><p>Delete a locally saved file, for details on the URIs used in the interface, see <a href="../../framework/file-organization.md">File organization</a></p><h4 id="parameters_4"><a href="#parameters_4"class="anchor-navigation-ex-anchor"name="parameters_4"><i class="fa fa-link"aria-hidden="true"></i></a>Parameters:</h4><table><thead><tr><th>Parameter name</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td>uri</td><td>String</td><td>Yes</td><td>The file URI that needs to be deleted, it can't be an app source file path and tmp type URI</td></tr><tr><td>success</td><td>Function</td><td>No</td><td>Callback succeeded</td></tr><tr><td>fail</td><td>Function</td><td>No</td><td>Couldn't return callback</td></tr><tr><td>complete</td><td>Function</td><td>No</td><td>The callback after the implementation finished</td></tr></tbody></table><h5 id="fail-return-error-code_4"><a href="#fail-return-error-code_4"class="anchor-navigation-ex-anchor"name="fail-return-error-code_4"><i class="fa fa-link"aria-hidden="true"></i></a>Fail return error code</h5><table><thead><tr><th>Error code</th><th>Description</th></tr></thead><tbody><tr><td>202</td><td>Parameter error</td></tr><tr><td>300</td><td>I/O error</td></tr></tbody></table><h4 id="example_4"><a href="#example_4"class="anchor-navigation-ex-anchor"name="example_4"><i class="fa fa-link"aria-hidden="true"></i></a>Example:</h4><pre><code>file.delete({
  uri: 'internal://files/path/to/file',
  success: function(data) {
    console.log("handling success");
  },
  fail: function(data, code) {
    console.log("handling fail, code=" + code);
  }
})
</code></pre><h3 id="filewritetextobject"><a href="#filewritetextobject"class="anchor-navigation-ex-anchor"name="filewritetextobject"><i class="fa fa-link"aria-hidden="true"></i></a>file.writeText(OBJECT)</h3><p>Write text to file</p><h4 id="parameters_5"><a href="#parameters_5"class="anchor-navigation-ex-anchor"name="parameters_5"><i class="fa fa-link"aria-hidden="true"></i></a>Parameters.</h4><table><thead><tr><th>Parameter name</th><th>Types</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td>uri</td><td>String</td><td>Yes</td><td>Local file paths, resource file paths and tmp partitions are not supported, files will be created if they do not exist</td></tr><tr><td>text</td><td>String</td><td>Yes</td><td>String to be written</td></tr><tr><td>encoding</td><td>String</td><td>No</td><td>Encoding format, default UTF-8</td></tr><tr><td>append</td><td>Boolean</td><td>No</td><td>Append mode or not, default false</td></tr><tr><td>success</td><td>Function</td><td>No</td><td>Successful callback</td></tr><tr><td>fail</td><td>Function</td><td>No</td><td>Failure to callback</td></tr><tr><td>complete</td><td>Function</td><td>No</td><td>Callback at the end of execution</td></tr></tbody></table><h5 id="fail-returns-the-error-code"><a href="#fail-returns-the-error-code"class="anchor-navigation-ex-anchor"name="fail-returns-the-error-code"><i class="fa fa-link"aria-hidden="true"></i></a>fail returns the error code.</h5><table><thead><tr><th>Error code</th><th>Description</th></tr></thead><tbody><tr><td>202</td><td>Parameter error</td></tr><tr><td>300</td><td>I/O errors</td></tr></tbody></table><h4 id="example_5"><a href="#example_5"class="anchor-navigation-ex-anchor"name="example_5"><i class="fa fa-link"aria-hidden="true"></i></a>Example:</h4><pre><code class="lang-javascript">file.writeText({
  <span class="hljs-attr">uri</span>: <span class="hljs-string">'internal://files/work/demo.txt'</span>,
  <span class="hljs-attr">text</span>: <span class="hljs-string">'test'</span>,
  <span class="hljs-attr">success</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'handling success'</span>)
  },
  <span class="hljs-attr">fail</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data, code</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`handling fail, code = <span class="hljs-subst">${code}</span>`</span>)
  }
})
</code></pre><h3 id="filewritearraybufferobject"><a href="#filewritearraybufferobject"class="anchor-navigation-ex-anchor"name="filewritearraybufferobject"><i class="fa fa-link"aria-hidden="true"></i></a>file.writeArrayBuffer(OBJECT)</h3><p>Write Buffer to File</p><h4 id="parameters_6"><a href="#parameters_6"class="anchor-navigation-ex-anchor"name="parameters_6"><i class="fa fa-link"aria-hidden="true"></i></a>Parameters.</h4><table><thead><tr><th>Parameter name</th><th>Types</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td>uri</td><td>String</td><td>Yes</td><td>Local file paths, resource file paths and tmp partitions are not supported, files will be created if they do not exist</td></tr><tr><td>buffer</td><td>Uint8Array</td><td>Yes</td><td>Buffer to be written</td></tr><tr><td>position</td><td>Number</td><td>No</td><td>Offset pointing to the location where the file starts writing data, default 0</td></tr><tr><td>append</td><td>Boolean</td><td>No</td><td>Whether it is append mode, default false. When true, the position parameter is invalid</td></tr><tr><td>success</td><td>Function</td><td>No</td><td>Successful callback</td></tr><tr><td>fail</td><td>Function</td><td>No</td><td>Failure to callback</td></tr><tr><td>complete</td><td>Function</td><td>No</td><td>Callback at the end of execution</td></tr></tbody></table><h5 id="fail-returns-the-error-code_1"><a href="#fail-returns-the-error-code_1"class="anchor-navigation-ex-anchor"name="fail-returns-the-error-code_1"><i class="fa fa-link"aria-hidden="true"></i></a>fail returns the error code.</h5><table><thead><tr><th>Error code</th><th>Description</th></tr></thead><tbody><tr><td>202</td><td>Parameter error</td></tr><tr><td>300</td><td>I/O errors</td></tr></tbody></table><h4 id="example_6"><a href="#example_6"class="anchor-navigation-ex-anchor"name="example_6"><i class="fa fa-link"aria-hidden="true"></i></a>Example:</h4><pre><code class="lang-javascript">file.writeArrayBuffer({
  <span class="hljs-attr">uri</span>: <span class="hljs-string">'internal://files/work/demo'</span>,
  <span class="hljs-attr">buffer</span>: buffer,
  <span class="hljs-attr">success</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'handling success'</span>)
  },
  <span class="hljs-attr">fail</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data, code</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`handling fail, code = <span class="hljs-subst">${code}</span>`</span>)
  }
})
</code></pre><h3 id="filereadtextobject"><a href="#filereadtextobject"class="anchor-navigation-ex-anchor"name="filereadtextobject"><i class="fa fa-link"aria-hidden="true"></i></a>file.readText(OBJECT)</h3><p>Reading text from a file</p><h4 id="parameters_7"><a href="#parameters_7"class="anchor-navigation-ex-anchor"name="parameters_7"><i class="fa fa-link"aria-hidden="true"></i></a>Parameters.</h4><table><thead><tr><th>Parameter name</th><th>Types</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td>uri</td><td>String</td><td>Yes</td><td>Local file path</td></tr><tr><td>encoding</td><td>String</td><td>No</td><td>Encoding format, default UTF-8</td></tr><tr><td>success</td><td>Function</td><td>No</td><td>Successful callback</td></tr><tr><td>fail</td><td>Function</td><td>No</td><td>Failure to callback</td></tr><tr><td>complete</td><td>Function</td><td>No</td><td>Callback at the end of execution</td></tr></tbody></table><h5 id="success-return-value_2"><a href="#success-return-value_2"class="anchor-navigation-ex-anchor"name="success-return-value_2"><i class="fa fa-link"aria-hidden="true"></i></a>success Return value:</h5><table><thead><tr><th>Parameter name</th><th>Types</th><th>Description</th></tr></thead><tbody><tr><td>text</td><td>String</td><td>Text to be read</td></tr></tbody></table><h5 id="fail-returns-the-error-code_2"><a href="#fail-returns-the-error-code_2"class="anchor-navigation-ex-anchor"name="fail-returns-the-error-code_2"><i class="fa fa-link"aria-hidden="true"></i></a>fail returns the error code.</h5><table><thead><tr><th>Error code</th><th>Description</th></tr></thead><tbody><tr><td>202</td><td>Parameter error</td></tr><tr><td>300</td><td>I/O errors</td></tr><tr><td>301</td><td>File does not exist</td></tr></tbody></table><h4 id="example_7"><a href="#example_7"class="anchor-navigation-ex-anchor"name="example_7"><i class="fa fa-link"aria-hidden="true"></i></a>Example:</h4><pre><code class="lang-javascript">file.readText({
  <span class="hljs-attr">uri</span>: <span class="hljs-string">'internal://files/work/demo.txt'</span>,
  <span class="hljs-attr">success</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'text: '</span> + data.text)
  },
  <span class="hljs-attr">fail</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data, code</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`handling fail, code = <span class="hljs-subst">${code}</span>`</span>)
  }
})
</code></pre><h3 id="filereadarraybufferobject"><a href="#filereadarraybufferobject"class="anchor-navigation-ex-anchor"name="filereadarraybufferobject"><i class="fa fa-link"aria-hidden="true"></i></a>file.readArrayBuffer(OBJECT)</h3><p>Read Buffer from file</p><h4 id="parameters_8"><a href="#parameters_8"class="anchor-navigation-ex-anchor"name="parameters_8"><i class="fa fa-link"aria-hidden="true"></i></a>Parameters.</h4><table><thead><tr><th>Parameter name</th><th>Types</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td>uri</td><td>String</td><td>Yes</td><td>Local file path</td></tr><tr><td>position</td><td>Number</td><td>No</td><td>The default value is the starting position of the file to be read</td></tr><tr><td>length</td><td>Number</td><td>No</td><td>The length of the read, or the end of the file is read if not filled in</td></tr><tr><td>success</td><td>Function</td><td>No</td><td>Successful callback</td></tr><tr><td>fail</td><td>Function</td><td>No</td><td>Failure to callback</td></tr><tr><td>complete</td><td>Function</td><td>No</td><td>Callback at the end of execution</td></tr></tbody></table><h5 id="success-return-value_3"><a href="#success-return-value_3"class="anchor-navigation-ex-anchor"name="success-return-value_3"><i class="fa fa-link"aria-hidden="true"></i></a>success Return value:</h5><table><thead><tr><th>Parameter name</th><th>Types</th><th>Description</th></tr></thead><tbody><tr><td>buffer</td><td>Uint8Array</td><td>Contents of the file to be read</td></tr></tbody></table><h5 id="fail-returns-the-error-code_3"><a href="#fail-returns-the-error-code_3"class="anchor-navigation-ex-anchor"name="fail-returns-the-error-code_3"><i class="fa fa-link"aria-hidden="true"></i></a>fail returns the error code.</h5><table><thead><tr><th>Error code</th><th>Description</th></tr></thead><tbody><tr><td>202</td><td>Parameter error</td></tr><tr><td>300</td><td>I/O errors</td></tr><tr><td>301</td><td>File does not exist</td></tr></tbody></table><h4 id="example_8"><a href="#example_8"class="anchor-navigation-ex-anchor"name="example_8"><i class="fa fa-link"aria-hidden="true"></i></a>Example:</h4><pre><code class="lang-javascript">file.readArrayBuffer({
  <span class="hljs-attr">uri</span>: <span class="hljs-string">'internal://files/work/demo'</span>,
  <span class="hljs-attr">position</span>: <span class="hljs-number">100</span>,
  <span class="hljs-attr">length</span>: <span class="hljs-number">100</span>,
  <span class="hljs-attr">success</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'buffer.length: '</span> + data.buffer.length)
  },
  <span class="hljs-attr">fail</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data, code</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`handling fail, code = <span class="hljs-subst">${code}</span>`</span>)
  }
})
</code></pre><h3 id="fileaccessobject"><a href="#fileaccessobject"class="anchor-navigation-ex-anchor"name="fileaccessobject"><i class="fa fa-link"aria-hidden="true"></i></a>file.access(OBJECT)</h3><p>Determine if a file or directory exists</p><h4 id="parameters_9"><a href="#parameters_9"class="anchor-navigation-ex-anchor"name="parameters_9"><i class="fa fa-link"aria-hidden="true"></i></a>Parameters.</h4><table><thead><tr><th>Parameter name</th><th>Types</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td>uri</td><td>String</td><td>Yes</td><td>Directory or file uri, cannot be an application resource path and tmp type uri. Support for application resource paths</td></tr><tr><td>success</td><td>Function</td><td>No</td><td>Successful callback</td></tr><tr><td>fail</td><td>Function</td><td>No</td><td>Failure to callback</td></tr><tr><td>complete</td><td>Function</td><td>No</td><td>Callback at the end of execution</td></tr></tbody></table><h5 id="fail-returns-the-error-code_4"><a href="#fail-returns-the-error-code_4"class="anchor-navigation-ex-anchor"name="fail-returns-the-error-code_4"><i class="fa fa-link"aria-hidden="true"></i></a>fail returns the error code.</h5><table><thead><tr><th>Error code</th><th>Description</th></tr></thead><tbody><tr><td>202</td><td>Parameter error</td></tr><tr><td>300</td><td>I/O errors</td></tr></tbody></table><h4 id="example_9"><a href="#example_9"class="anchor-navigation-ex-anchor"name="example_9"><i class="fa fa-link"aria-hidden="true"></i></a>Example:</h4><pre><code class="lang-javascript">file.access({
  <span class="hljs-attr">uri</span>: <span class="hljs-string">'internal://files/test'</span>,
  <span class="hljs-attr">success</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`handling success`</span>)
  },
  <span class="hljs-attr">fail</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data, code</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`handling fail, code = <span class="hljs-subst">${code}</span>`</span>)
  }
})
</code></pre><h3 id="filemkdirobject"><a href="#filemkdirobject"class="anchor-navigation-ex-anchor"name="filemkdirobject"><i class="fa fa-link"aria-hidden="true"></i></a>file.mkdir(OBJECT)</h3><p>Create a directory</p><h4 id="parameters_10"><a href="#parameters_10"class="anchor-navigation-ex-anchor"name="parameters_10"><i class="fa fa-link"aria-hidden="true"></i></a>Parameters.</h4><table><thead><tr><th>Parameter name</th><th>Types</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td>uri</td><td>String</td><td>Yes</td><td>directory uri, not uri of application resource paths and type tmp</td></tr><tr><td>recursive</td><td>Boolean</td><td>No</td><td>Whether to recursively create the directory after creating the directory's parent directory. Default false</td></tr><tr><td>success</td><td>Function</td><td>No</td><td>Successful callback</td></tr><tr><td>fail</td><td>Function</td><td>No</td><td>Failure to callback</td></tr><tr><td>complete</td><td>Function</td><td>No</td><td>Callback at the end of execution</td></tr></tbody></table><h5 id="fail-returns-the-error-code_5"><a href="#fail-returns-the-error-code_5"class="anchor-navigation-ex-anchor"name="fail-returns-the-error-code_5"><i class="fa fa-link"aria-hidden="true"></i></a>fail returns the error code.</h5><table><thead><tr><th>Error code</th><th>Description</th></tr></thead><tbody><tr><td>202</td><td>Parameter error</td></tr><tr><td>300</td><td>I/O errors</td></tr></tbody></table><h4 id="example_10"><a href="#example_10"class="anchor-navigation-ex-anchor"name="example_10"><i class="fa fa-link"aria-hidden="true"></i></a>Example:</h4><pre><code class="lang-javascript">file.mkdir({
  <span class="hljs-attr">uri</span>: <span class="hljs-string">'internal://files/dir/'</span>,
  <span class="hljs-attr">success</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`handling success`</span>)
  },
  <span class="hljs-attr">fail</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data, code</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`handling fail, code = <span class="hljs-subst">${code}</span>`</span>)
  }
})
</code></pre><h3 id="filermdirobject"><a href="#filermdirobject"class="anchor-navigation-ex-anchor"name="filermdirobject"><i class="fa fa-link"aria-hidden="true"></i></a>file.rmdir(OBJECT)</h3><p>Delete Directory</p><h4 id="parameters_11"><a href="#parameters_11"class="anchor-navigation-ex-anchor"name="parameters_11"><i class="fa fa-link"aria-hidden="true"></i></a>Parameters.</h4><table><thead><tr><th>Parameter name</th><th>Types</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td>uri</td><td>String</td><td>Yes</td><td>directory uri, not uri of application resource paths and type tmp</td></tr><tr><td>recursive</td><td>Boolean</td><td>No</td><td>Whether to recursively delete subfiles and subdirectories. Default false</td></tr><tr><td>success</td><td>Function</td><td>No</td><td>Successful callback</td></tr><tr><td>fail</td><td>Function</td><td>No</td><td>Failure to callback</td></tr><tr><td>complete</td><td>Function</td><td>No</td><td>Callback at the end of execution</td></tr></tbody></table><h5 id="fail-returns-the-error-code_6"><a href="#fail-returns-the-error-code_6"class="anchor-navigation-ex-anchor"name="fail-returns-the-error-code_6"><i class="fa fa-link"aria-hidden="true"></i></a>fail returns the error code.</h5><table><thead><tr><th>Error code</th><th>Description</th></tr></thead><tbody><tr><td>202</td><td>Parameter error</td></tr><tr><td>300</td><td>I/O errors</td></tr></tbody></table><h4 id="example_11"><a href="#example_11"class="anchor-navigation-ex-anchor"name="example_11"><i class="fa fa-link"aria-hidden="true"></i></a>Example:</h4><pre><code class="lang-javascript">file.rmdir({
  <span class="hljs-attr">uri</span>: <span class="hljs-string">'internal://files/dir/'</span>,
  <span class="hljs-attr">success</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`handling success`</span>)
  },
  <span class="hljs-attr">fail</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data, code</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`handling fail, code = <span class="hljs-subst">${code}</span>`</span>)
  }
})
</code></pre></section></div><div class="search-results"><div class="has-results"><h1 class="search-results-title"><span class="search-results-count"></span> 条匹配 "<span class="search-query"></span>" 的结果</h1><ul class="search-results-list"></ul></div><div class="no-results"><h1 class="search-results-title">没有搜索到与 "<span class="search-query"></span>" 相关的内容</h1></div></div></div></div></div><a href="storage.en.html"class="navigation navigation-prev navigation-unique"aria-label="Previous page: Data storage"><i class="fa fa-angle-left"></i></a></div></div><script src="../../gitbook/gitbook.js"></script><script src="../../gitbook/gitbook-plugin-hap-util/plugin.js"></script><script src="../../gitbook/gitbook-plugin-nocache/nocache.js"></script><script src="../../gitbook/gitbook-plugin-search-pro/jquery.mark.min.js"></script><script src="../../gitbook/gitbook-plugin-search-pro/search.js"></script><script>gitbook.page.hasChanged({page:{title:"File storage",level:"2.1.3.4.2",depth:4,next:{title:"System capabilities",level:"2.1.3.5",depth:3,ref:"",articles:[{title:"Geographical location",level:"2.1.3.5.1",depth:4,path:"features/system/geolocation.en.md",ref:"features/system/geolocation.en.md",articles:[]},{title:"Home screen icons",level:"2.1.3.5.2",depth:4,path:"features/system/shortcut.en.md",ref:"features/system/shortcut.en.md",articles:[]},{title:"Network status",level:"2.1.3.5.3",depth:4,path:"features/system/network.en.md",ref:"features/system/network.en.md",articles:[]},{title:"Device information",level:"2.1.3.5.4",depth:4,path:"features/system/device.en.md",ref:"features/system/device.en.md",articles:[]}]},previous:{title:"Data storage",level:"2.1.3.4.1",depth:4,path:"features/system/storage.en.md",ref:"features/system/storage.en.md",articles:[]},dir:"ltr"},config:{plugins:["html-minifier","-sharing","-fontsettings","hap-util","favicon","theme-default","nocache","-lunr","-search","search-pro","-highlight","highlight-hap","anchor-navigation-ex"],styles:{website:"styles/website.css"},pluginsConfig:{favicon:{shortcut:"",bookmark:""},"html-minifier":{customAttrSurround:[],removeScriptTypeAttributes:!1,removeEmptyAttributes:!1,removeRedundantAttributes:!1,removeEmptyElements:!1,sortClassName:!0,caseSensitive:!0,html5:!0,collapseWhitespace:!0,processConditionalComments:!1,quoteCharacter:null,keepClosingSlash:!0,preventAttributesEscaping:!1,minifyURLs:!1,removeAttributeQuotes:!1,decodeEntities:!0,trimCustomFragments:!1,customAttrAssign:[],includeAutoGeneratedTags:!0,collapseInlineTagWhitespace:!1,collapseBooleanAttributes:!0,minifyJS:!0,removeTagWhitespace:!0,preserveLineBreaks:!1,sortAttributes:!0,removeStyleLinkTypeAttributes:!1,removeComments:!0,minifyCSS:!0,processScripts:[],conservativeCollapse:!1,removeOptionalTags:!1,useShortDoctype:!1},"anchor-navigation-ex":{associatedWithSummary:!1,float:{floatIcon:"fa fa-navicon",level1Icon:"",level2Icon:"",level3Icon:"",showLevelIcon:!1},mode:"",multipleH1:!0,pageTop:{level1Icon:"",level2Icon:"",level3Icon:"",showLevelIcon:!1},printLog:!1,showGoTop:!0,showLevel:!1},"hap-util":{},nocache:{},"search-pro":{},"highlight-hap":{},"theme-default":{showLevel:!1,styles:{ebook:"styles/ebook.css",epub:"styles/epub.css",mobi:"styles/mobi.css",pdf:"styles/pdf.css",print:"styles/print.css",website:"styles/website.css"}}},theme:"default",author:"QuickApp.cn",pdf:{pageNumbers:!0,fontSize:12,fontFamily:"Arial",paperSize:"a4",chapterMark:"pagebreak",pageBreaksBefore:"/",margin:{right:62,left:62,top:56,bottom:56}},structure:{langs:"LANGS.md",readme:"README.md",glossary:"GLOSSARY.md",summary:"SUMMARY.md"},variables:{},version:"{{datetime}}",title:"快应用开发文档",language:"zh-hans",gitbook:"3.2.3",description:"快应用的开发文档，供快应用开发者学习和参考"},file:{path:"features/system/file.en.md",mtime:"2021-09-14T04:27:18.493Z",type:"markdown"},gitbook:{version:"3.2.3",time:"2021-09-22T03:43:40.422Z"},basePath:"../..",book:{language:""}}),function(){var e=location.pathname.split("/")[1];e!=(sessionStorage.getItem("indexTab")||"")&&sessionStorage.setItem("mst",0),~location.pathname.indexOf(".html")||sessionStorage.setItem("mst",0),sessionStorage.setItem("indexTab",e);var t=$(".doc-menu"),s=$(".summary");if(!(t.height()>s.height()&&0!==s.height())){t.scroll(function(){sessionStorage.setItem("mst",t.scrollTop())});var a=sessionStorage.getItem("mst")||0;t.scrollTop(a),$("ul.summary li").each(function(){var e=$(this);10<e.data("level").length&&(e.hasClass("active")?e.parent().parent().attr("class","open chapter cur"):e.parent().parent().siblings().each(function(){var e=$(this);!e.hasClass("cur")&&e.hasClass("open chapter")&&e.attr("class","chapter")}))})}}()</script></body></html>